import{H as y,N as x}from"./Navbar-C-QiNICq.js";import{m as E}from"./mixins-CNIKFpNw.js";import{_ as D,g as A,c as l,a as s,b as p,e as i,w as m,i as N,F as C,r as a,o as n,t as u,j as c}from"./app-C61jTV-o.js";const F={data(){return{pageTitle:"Add Album",artists:[],albumData:{title:"",release_year:"",artist_id:null},isLoading:!0,snackbar:!1,formErrors:{}}},mounted(){this.fetchArtists().then(r=>{this.artists=r,this.isLoading=!1}).catch(r=>{})},mixins:[E],methods:{async submitForm(){A.post("/api/album-create",this.albumData).then(r=>{this.snackbar=!0,this.albumData={title:"",release_year:"",artist_id:null},this.formErrors={}}).catch(r=>{r.response.status===422?this.formErrors=r.response.data.errors:console.error("Error creating album:",r)})}},components:{Header:y,Navbar:x}},H={class:"app-container__main"},L={class:"app-container__page"},S={key:0,class:"loading-spinner"},T={key:1},U={key:0,class:"error"},w={key:1,class:"error"},B={key:2,class:"error"};function M(r,t,j,R,e,b){const f=a("Navbar"),v=a("Header"),g=a("v-progress-circular"),k=a("v-select"),_=a("v-text-field"),d=a("v-btn"),V=a("v-form"),h=a("v-snackbar");return n(),l(C,null,[s(f),p("div",H,[s(v,{pagename:e.pageTitle},null,8,["pagename"]),p("div",L,[e.isLoading?(n(),l("div",S,[s(g,{color:"#3686FF",indeterminate:""})])):i("",!0),e.isLoading?i("",!0):(n(),l("div",T,[s(V,{onSubmit:N(b.submitForm,["prevent"])},{default:m(()=>[s(k,{modelValue:e.albumData.artist_id,"onUpdate:modelValue":t[0]||(t[0]=o=>e.albumData.artist_id=o),items:e.artists,"item-title":"name","item-value":"id",label:"Select an Artist"},null,8,["modelValue","items"]),e.formErrors.artist_id?(n(),l("span",U,u(e.formErrors.artist_id[0]),1)):i("",!0),s(_,{modelValue:e.albumData.title,"onUpdate:modelValue":t[1]||(t[1]=o=>e.albumData.title=o),label:"Album Title"},null,8,["modelValue"]),e.formErrors.title?(n(),l("span",w,u(e.formErrors.title[0]),1)):i("",!0),s(_,{modelValue:e.albumData.release_year,"onUpdate:modelValue":t[2]||(t[2]=o=>e.albumData.release_year=o),label:"Release Year"},null,8,["modelValue"]),e.formErrors.release_year?(n(),l("span",B,u(e.formErrors.release_year[0]),1)):i("",!0),s(d,{type:"submit"},{default:m(()=>[c("Add Album")]),_:1})]),_:1},8,["onSubmit"]),s(h,{modelValue:e.snackbar,"onUpdate:modelValue":t[4]||(t[4]=o=>e.snackbar=o)},{actions:m(()=>[s(d,{color:"pink",variant:"text",onClick:t[3]||(t[3]=o=>e.snackbar=!1)},{default:m(()=>[c(" Close ")]),_:1})]),default:m(()=>[c(" Album has been saved! :) ")]),_:1},8,["modelValue"])]))])])],64)}const G=D(F,[["render",M]]);export{G as default};
